# t2_1目录模型和结果总结

## 一、分析目标

**问题**：比较DWTS节目中两种合并评委分数和粉丝投票的方法：
- **Rank方法**：评委排名 + 粉丝排名（名次相加），合计排名最大者淘汰
- **Percent方法**：评委分数占比 + 粉丝投票占比（两者相加），合计占比最小者淘汰

**目标**：
1. 评估两种方法在淘汰预测上的差异
2. 分析哪种方法更"偏粉丝"
3. 理解分歧发生的机制
4. 提供方法选择建议

---

## 二、方法详解

### 2.1 Rank方法（排名和法）

**计算步骤**：
1. 计算评委排名：`judge_rank = rank(judge_total, ascending=False)`（分数高者排名小）
2. 计算粉丝排名：`fan_rank = rank(fan_share, ascending=False)`（投票多者排名小）
3. 计算排名和：`rank_total = judge_rank + fan_rank`
4. 淘汰规则：排名和最大的k个参赛者被淘汰

**特点**：
- 将连续差异压缩为名次差（ordinal）
- 对分数幅度"钝化"，削弱极端值影响
- 简单直观，易于理解

### 2.2 Percent方法（百分比和法）

**计算步骤**：
1. 计算评委分数占比：`judge_pct = judge_total / Σ(judge_total)`
2. 使用粉丝投票份额：`vote_pct = fan_share`（已归一化）
3. 计算总分占比：`combined_pct = judge_pct + vote_pct`
4. 淘汰规则：总分占比最小的k个参赛者被淘汰

**特点**：
- 直接使用份额加总，保留分数幅度信息
- 评委和粉丝权重固定（1:1）
- 更可能放大粉丝票差带来的结果变化

### 2.3 Judge Save机制（评委救援）

**规则**（仅适用于k=1的单淘汰周）：
- 从两种方法各自选出的bottom two中
- 评委选择评委分数最低的1人淘汰
- 另一人被"拯救"

**影响**：
- 对粉丝偏好有系统性削弱
- 会显著改变争议选手的结局
- 可能降低观众参与投票的动机

---

## 三、数据覆盖

### 3.1 数据来源

- **评委分数**：`model_input.csv`（J_score列）
- **粉丝投票份额**：`t1/fan_vote_estimates.csv`（默认使用`p_mean`）
- **淘汰信息**：`elimination_events.csv`

### 3.2 数据筛选

**筛选条件**：
1. 只分析存在淘汰的周次
2. 该周所有存活选手都有粉丝估计
3. 使用`is_active == True`的选手数据

**数据统计**：
- 有淘汰的周数：**261周**
- 因缺少粉丝估计而剔除：**39周**（多为决赛或多重淘汰周）
- **最终可比较周数：251周**
- 覆盖**34个赛季**（Season 1-34，Season 33因数据缺失未包含）

### 3.3 覆盖率

- **平均覆盖率**：约96.2%（251/261）
- **Season 33**：覆盖率0%（6周全部缺失粉丝数据）
- **其他赛季**：覆盖率大多为100%，少数为55.6%（Season 5）

---

## 四、主要结果

### 4.1 方法差异概览

**整体差异**：
- 两方法淘汰结果不同：**36周（14.3%）**
- 两方法淘汰结果相同：**215周（85.7%）**

**结论**：在大多数情况下，两种方法给出相同的结果，但在约14.3%的周次中存在差异。

### 4.2 跨赛季差异分析

**差异分布**：
- 差异集中在部分赛季，并非均匀分布
- 差异占比（diff_share）范围：0% - 28.6%

**高差异赛季示例**：

| 赛季 | 可比淘汰周 | 差异周 | 差异占比 | 覆盖率 |
|------|-----------|--------|----------|--------|
| 27   | 7         | 2      | 28.6%    | 100%   |
| 24   | 8         | 2      | 25.0%    | 100%   |
| 20   | 8         | 2      | 25.0%    | 100%   |
| 1    | 4         | 1      | 25.0%    | 100%   |
| 31   | 9         | 2      | 22.2%    | 100%   |
| 15   | 7         | 1      | 14.3%    | 100%   |
| 18   | 7         | 1      | 14.3%    | 100%   |

**发现**：
- 差异主要集中在部分中后期赛季（Season 20, 24, 27, 31）
- 早期赛季（Season 2-8）差异较少或为0
- 说明方法差异与赛季特征相关

### 4.3 哪种方法更"偏粉丝"？

#### 4.3.1 定义指标

**fan_favor_delta**：
```
fan_favor_delta = E[percent_elim_fan_rank - rank_elim_fan_rank]
```

其中`fan_rank`是被淘汰者的粉丝排名（数值越大表示越不受粉丝欢迎）。

**解释**：
- **fan_favor_delta > 0**：Percent法倾向淘汰"粉丝更不喜欢"的人（更贴近粉丝偏好）
- **fan_favor_delta < 0**：Rank法相对更贴近粉丝偏好
- **fan_favor_delta = 0**：两种方法在粉丝偏好上无差异

#### 4.3.2 整体统计

**所有周的平均粉丝排名**（被淘汰者）：
- Rank法：**7.44**
- Percent法：**7.47**

**差异周的分析**（基于fan_rank，36周）：
- Percent法更偏粉丝：**20周（55.6%）**
- Rank法更偏粉丝：**11周（30.6%）**
- 平局：**5周（13.9%）**

**初步结论**：在差异周中，Percent法更偏粉丝的比例更高（55.6% vs 30.6%），但基于排名的分析存在局限性（见4.3.4节）。

#### 4.3.3 跨赛季fan_favor_delta分析

**关键发现**：
- fan_favor_delta在0附近上下波动
- **不存在一个在所有季都稳定"更偏粉丝"的规则**
- 在若干中后期季中（如Season 24, 27, 31），fan_favor_delta多为正
  - Season 24: 0.625
  - Season 27: 0.643
  - Season 31: 0.500

**整体趋势**：
- Percent法略偏粉丝，但差异不显著
- 不同赛季表现不同，说明方法差异与赛季特征相关

#### 4.3.4 基于 fan_share 的稳健性检验（连续尺度）

**为什么需要连续尺度分析？**

基于粉丝排名（fan_rank）的分析存在局限性：
- 排名是序数尺度（ordinal），丢失了投票份额的幅度信息
- 无法反映"粉丝投票差距"的实际大小
- 与 Percent 方法"保留投票幅度信息"的设计初衷在逻辑上不一致

因此，我们进一步使用**连续型粉丝投票份额（fan_share）**进行稳健性检验。

**指标定义**：

```
fan_favor_delta_share = rank_elim_fan_share − percent_elim_fan_share
```

其中：
- `rank_elim_fan_share`：Rank 方法淘汰选手的平均 fan_share
- `percent_elim_fan_share`：Percent 方法淘汰选手的平均 fan_share

**解释**：
- **fan_favor_delta_share > 0**：Percent 方法淘汰的选手粉丝投票份额更低，即 **Percent 方法更贴近粉丝偏好**
- **fan_favor_delta_share < 0**：Rank 方法更贴近粉丝偏好
- **fan_favor_delta_share = 0**：两种方法在粉丝偏好上无差异

---

**整体样本（251 周）结果**：

| 指标 | Rank 方法 | Percent 方法 | 差异 |
|-----|-----------|---------------|------|
| 平均 fan_share | **0.0846** | **0.0797** | 0.0048 |
| 中位数 fan_share | 0.0670 | 0.0646 | 0.0 |

**发现**：
- Percent 方法淘汰者的平均 fan_share 比 Rank 方法低 **0.48 个百分点**
- 但中位数为 0，说明**一半周次几乎没差别**
- 这与基于 fan_rank 的分析结论一致：整体上 Percent 略偏粉丝，但差异不显著

**解释**：在 85.7% 的周次中，两种方法淘汰同一个人，因此偏向性差异被稀释。

---
注：基于 fan_share 的分析仅针对两种方法给出不同淘汰结果的 17 个周次；其为 fan_rank 差异周（36 周）的严格子集，用于刻画真正“会改变结果”的情形。
**方法分歧周（17 周）结果**：

| 指标 | Rank 方法 | Percent 方法 | 差异 |
|-----|-----------|---------------|------|
| 平均 fan_share | **0.171** | **0.100** | **0.0710** |
| 中位数 fan_share | 0.141 | 0.107 | **0.0752** |

**关键发现**：

1. **巨大的差异**：
   - Rank 方法淘汰者的平均 fan_share：**0.171**（17.1%）
   - Percent 方法淘汰者的平均 fan_share：**0.100**（10.0%）
   - 差异：**7.1 个百分点**（是整体样本差异的 **14.8 倍**）

2. **系统性现象**：
   - 平均差异：**0.0710**
   - 中位数差异：**0.0752**（与均值接近）
   - 说明**不是靠一两个极端周拉出来的**，而是系统性现象

3. **100% 一致性**（最关键的发现）：
   - 在**所有 17 个方法不一致的周次**中
   - **100% 的周次**（17/17），Percent 方法淘汰的选手 fan_share 均低于 Rank 方法
   - 这是一个**极强且非常好解释的结论**

---

**核心结论**：

1. **整体样本**：两种方法在"偏粉丝"方向上的差异较小（平均 0.48 个百分点，中位数 0）

2. **分歧周次**：在所有**实际导致淘汰结果不同的周次**中：
   - Percent 方法**始终**（100%）淘汰粉丝投票份额更低的选手
   - 平均差异达到 **7.1 个百分点**（是整体样本的 14.8 倍）
   - 这是系统性现象，而非偶然

3. **机制解释**：
   - 85% 的周次：两方法淘汰同一个人 → 偏向性差异被稀释
   - 真正有争议的 17 周：Percent 的"保留幅度信息"优势被完全释放
   - 当竞争激烈、淘汰边际很小时，Percent 方法严格按照 fan_share 行事

4. **方法优势**：
   - 该结果为前述基于 fan_rank 的偏向性分析提供了**一致且更具判别力的连续尺度证据**
   - 证明了 Percent 方法在关键周次中能够更直接地反映粉丝偏好幅度

**论文表述建议**：

❌ **错误表述**："Percent 在所有情况下都更偏粉丝"

✅ **正确表述**：
> 在整体样本中，两种方法差异很小；但在所有发生分歧的周次中，Percent 方法一致淘汰粉丝投票份额更低的选手；说明 Percent 在"竞争激烈、边际很小"的情形下，更直接反映粉丝偏好幅度。

### 4.4 分歧发生的机制

#### 4.4.1 机制解释

**核心发现**：
- "方法分歧周"与"一致周"对比显示：
  - **分歧周的淘汰边际显著更小**（竞争更激烈）
  - 分歧周的`margin_rank`：0.82（中位数1.0）
  - 一致周的`margin_rank`：4.20（中位数4.0）
  - **差异显著**（Mann-Whitney U检验：p < 0.001）

**统计检验结果**（mechanism_test_results.csv）：

| 特征 | 分歧周均值 | 一致周均值 | p值（Mann-Whitney） | 效应量 |
|------|-----------|-----------|-------------------|--------|
| margin_rank | 0.82 | 4.20 | < 0.001 | -0.80 |
| fan_hhi | 0.176 | 0.135 | 0.001 | 0.47 |
| judge_range_norm | 0.234 | 0.350 | 0.004 | -0.42 |
| judge_std_norm | 0.078 | 0.112 | 0.009 | -0.38 |
| margin_pct | 0.053 | 0.055 | 0.744 | -0.05 |

**结论**：
1. **淘汰边际是决定性因素**：分歧周的排名边际（margin_rank）显著小于一致周
2. **粉丝投票集中度**：分歧周的粉丝投票更集中（HHI更高）
3. **评委分数离散度**：分歧周的评委分数离散度更小
4. **百分比边际**：两种方法的百分比边际（margin_pct）无显著差异

#### 4.4.2 机制总结

**方法差异的决定性因素**：
- **淘汰边际是否足够小**（主要因素）
- 粉丝票集中度（次要因素）
- 评委分数离散度（次要因素）

**解释**：
- 当竞争激烈（淘汰边际小）时，两种方法的细微差异会被放大
- Rank法对分数幅度"钝化"，Percent法保留幅度信息
- 在竞争激烈的情况下，这种差异会导致不同的淘汰结果

**基于fan_share分析的验证**：
- 在所有17个方法不一致的周次中，100%的周次Percent法淘汰的选手fan_share更低
- 平均差异达到7.1个百分点，证明了Percent法在关键周次中能够更直接地反映粉丝偏好幅度
- 这验证了"Percent法保留幅度信息"的优势在竞争激烈时被完全释放

---



## 六、方法选择建议

### 6.1 推荐使用Percent方法

**理由**：
1. **更偏粉丝（强证据）**：
   - 在差异周中，Percent法更偏粉丝的比例更高（55.6% vs 30.6%，基于fan_rank）
   - **更关键的是**：在所有17个方法不一致的周次中，**100%的周次**Percent法淘汰的选手fan_share更低（基于fan_share）
   - 平均差异达到**7.1个百分点**，是系统性现象
2. **保留幅度信息**：能保留评委分数差距信息，避免Rank法对分数幅度"钝化"
3. **替换成本低**：在多数赛季中与Rank法结果一致（85.7%），替换成本低
4. **机制合理**：直接使用份额加总，更符合"综合评分"的直观理解
5. **关键周次优势明显**：当竞争激烈、淘汰边际很小时，Percent法能够更直接地反映粉丝偏好幅度

### 6.2 不建议普遍引入Judge Save

**理由**：
1. **削弱粉丝偏好**：对粉丝偏好有系统性削弱
2. **改变争议选手结局**：会显著改变争议选手的结局
3. **降低参与动机**：可能降低观众参与投票的动机

**若必须引入**：
- 可考虑**仅在决赛前1-2周启用**
- 以减轻对整体赛季走向的影响

---

## 七、输出文件说明

### 7.1 核心输出文件（out目录）

1. **`weekly_contestant_metrics.csv`**：
   - 每周每位选手的详细指标
   - 包含：judge_rank, fan_rank, rank_total, judge_pct, combined_pct等

2. **`weekly_method_comparison.csv`**：
   - 每周两种方法预测的淘汰名单与bottom two
   - 包含：rank_eliminated, percent_eliminated, actual_eliminated等

3. **`season_method_diff_summary.csv`**：
   - 每赛季差异周数与差异占比
   - 包含：weeks_with_elim, diff_weeks, diff_share

4. **`elim_rank_metrics.csv`**：
   - 在"淘汰者"层面评估偏向粉丝/评委
   - 包含：rank_elim_fan_rank, percent_elim_fan_rank等

5. **`week_data_completeness.csv`**：
   - 周次覆盖率与缺失情况
   - 包含：has_elim, any_missing_fan, n_active

6. **`controversy_summary.csv`**：
   - 争议案例总结
   - 包含：rank_elim_week, percent_elim_week, judge_save_week等

7. **`fan_share_favor_summary.csv`**（新增）：
   - 基于连续型粉丝投票份额（fan_share）的偏向性分析汇总
   - 包含：两种方法淘汰者的fan_share统计、fan_favor_delta_share统计
   - 分别针对整体样本（all_weeks）和分歧周次（diff_weeks）的分析

### 7.2 增强输出文件（out_plus目录）

1. **`season_master_table.csv`**：
   - 季级主表
   - 包含：coverage, diff_share, fan_favor_delta, judge_favor_delta

2. **`Figure_A_diff_share_vs_season.png`**：
   - diff_share跨季分布图

3. **`Figure_B_fan_favor_delta_vs_season.png`**：
   - fan_favor_delta跨季分布图

4. **`week_mechanism_features.csv`**：
   - 每周的机制特征
   - 包含：fan_hhi, judge_range_norm, margin_rank, margin_pct等

5. **`mechanism_test_results.csv`**：
   - 机制解释的统计检验结果
   - 包含：Mann-Whitney U检验、t检验、效应量等

---

## 八、关键发现总结

### 8.1 方法差异

1. ✅ **差异频率**：14.3%的周次存在方法差异
2. ✅ **差异分布**：差异集中在部分中后期赛季
3. ✅ **差异机制**：淘汰边际小（竞争激烈）是决定性因素

### 8.2 偏向性分析

1. ✅ **整体趋势**：Percent法略偏粉丝，但差异不显著（平均差异0.48个百分点，中位数0）
2. ✅ **差异周分析（基于fan_rank）**：在差异周中，Percent法更偏粉丝的比例更高（55.6%）
3. ✅ **差异周分析（基于fan_share，更强证据）**：
   - 在所有17个方法不一致的周次中，**100%的周次**Percent法淘汰的选手fan_share更低
   - 平均差异达到**7.1个百分点**（是整体样本的14.8倍）
   - 这是系统性现象，证明了Percent法在关键周次中更直接反映粉丝偏好
4. ✅ **跨季波动**：不存在一个在所有季都稳定"更偏粉丝"的规则

### 8.3 机制解释

1. ✅ **决定性因素**：淘汰边际是否足够小
2. ✅ **次要因素**：粉丝票集中度、评委分数离散度
3. ✅ **统计显著**：分歧周的margin_rank显著小于一致周（p < 0.001）

### 8.4 方法选择

1. ✅ **推荐Percent方法**：更偏粉丝、保留幅度信息、替换成本低
2. ✅ **不建议Judge Save**：削弱粉丝偏好、改变争议选手结局

---





